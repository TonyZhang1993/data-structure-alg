## å›æº¯ç®—æ³•ï¼ˆBacktracking Algorithmï¼‰

> æ˜¯ä¸€ç§ç»å…¸çš„æ±‚è§£é—®é¢˜çš„ç®—æ³•ï¼Œå®ƒé€šè¿‡ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„è§£ï¼Œå¹¶é€æ­¥æ„å»ºè§£å†³æ–¹æ¡ˆï¼Œå½“å‘ç°å½“å‰æ–¹æ¡ˆä¸èƒ½å¾—åˆ°æ­£ç¡®ç»“æœæ—¶ï¼Œä¼šå›æº¯åˆ°ä¸Šä¸€æ­¥è¿›è¡Œå…¶ä»–é€‰æ‹©ï¼Œä»¥æ‰¾åˆ°æœ€ç»ˆçš„è§£ã€‚

å›æº¯ç®—æ³•çš„ç‰¹ç‚¹æ˜¯ç©·ä¸¾æ‰€æœ‰å¯èƒ½è§£ï¼Œå› æ­¤åœ¨é—®é¢˜çš„è§£ç©ºé—´è¾ƒå¤§æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦å¾€å¾€æ¯”è¾ƒé«˜ã€‚ä½†å›æº¯ç®—æ³•é€šå¸¸å¯ä»¥é€šè¿‡å‰ªæä¼˜åŒ–å’Œåˆç†é€‰æ‹©æœç´¢é¡ºåºæ¥å‡å°‘è®¡ç®—é‡ã€‚

--- labuladong <br>
https://labuladong.online/algo/di-san-zha-24031/bao-li-sou-96f79/hui-su-sua-c26da/

å…¶å®å›æº¯ç®—æ³•å’Œæˆ‘ä»¬å¸¸è¯´çš„ DFS ç®—æ³•éå¸¸ç±»ä¼¼ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§æš´åŠ›ç©·ä¸¾ç®—æ³•ã€‚å›æº¯ç®—æ³•å’Œ DFS ç®—æ³•çš„ç»†å¾®å·®åˆ«æ˜¯ï¼šå›æº¯ç®—æ³•æ˜¯åœ¨éå†ã€Œæ ‘æã€ï¼ŒDFS ç®—æ³•æ˜¯åœ¨éå†ã€ŒèŠ‚ç‚¹ã€

æŠ½è±¡åœ°è¯´ï¼Œè§£å†³ä¸€ä¸ªå›æº¯é—®é¢˜ï¼Œå®é™…ä¸Šå°±æ˜¯éå†ä¸€æ£µå†³ç­–æ ‘çš„è¿‡ç¨‹ï¼Œæ ‘çš„æ¯ä¸ªå¶å­èŠ‚ç‚¹å­˜æ”¾ç€ä¸€ä¸ªåˆæ³•ç­”æ¡ˆã€‚ä½ æŠŠæ•´æ£µæ ‘éå†ä¸€éï¼ŒæŠŠå¶å­èŠ‚ç‚¹ä¸Šçš„ç­”æ¡ˆéƒ½æ”¶é›†èµ·æ¥ï¼Œå°±èƒ½å¾—åˆ°æ‰€æœ‰çš„åˆæ³•ç­”æ¡ˆã€‚

ç«™åœ¨å›æº¯æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½ åªéœ€è¦æ€è€ƒ 3 ä¸ªé—®é¢˜ï¼š

1ã€è·¯å¾„ï¼šä¹Ÿå°±æ˜¯å·²ç»åšå‡ºçš„é€‰æ‹©ã€‚

2ã€é€‰æ‹©åˆ—è¡¨ï¼šä¹Ÿå°±æ˜¯ä½ å½“å‰å¯ä»¥åšçš„é€‰æ‹©ã€‚

3ã€ç»“æŸæ¡ä»¶ï¼šä¹Ÿå°±æ˜¯åˆ°è¾¾å†³ç­–æ ‘åº•å±‚ï¼Œæ— æ³•å†åšé€‰æ‹©çš„æ¡ä»¶ã€‚

åªè¦ä»æ ¹éå†è¿™æ£µæ ‘ï¼Œè®°å½•è·¯å¾„ä¸Šçš„æ•°å­—ï¼Œå…¶å®å°±æ˜¯æ‰€æœ‰çš„å…¨æ’åˆ—ã€‚æˆ‘ä»¬ä¸å¦¨æŠŠè¿™æ£µæ ‘ç§°ä¸ºå›æº¯ç®—æ³•çš„ã€Œå†³ç­–æ ‘ã€ã€‚

ä¸ºå•¥è¯´è¿™æ˜¯å†³ç­–æ ‘å‘¢ï¼Œå› ä¸ºä½ åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå…¶å®éƒ½åœ¨åšå†³ç­–
![Alt text](image.png)

å›æº¯ç®—æ³•çš„æ¡†æ¶ï¼š
```js
result = []

function backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨) {
  if (æ»¡è¶³ç»“æŸæ¡ä»¶) {
    result.push(è·¯å¾„)
    return
  }

  for(é€‰æ‹© in é€‰æ‹©åˆ—è¡¨) {
    //  å‰ªææ“ä½œ
    if (æ»¡è¶³æ¡ä»¶) {
      do sth
    }

    // åšé€‰æ‹©  // å‰åºä½ç½®éœ€è¦çš„æ“ä½œ
    å°†è¯¥é€‰æ‹©ä»é€‰æ‹©åˆ—è¡¨ç§»é™¤
    è·¯å¾„.add(é€‰æ‹©)

    backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨)

    è·¯å¾„.remove(é€‰æ‹©)
    å°†è¯¥é€‰æ‹©å†åŠ å…¥é€‰æ‹©åˆ—è¡¨
    // æ’¤é”€é€‰æ‹©  // ååºä½ç½®éœ€è¦çš„æ“ä½œ
  }
}
å‰åºéå†çš„ä»£ç åœ¨è¿›å…¥æŸä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰çš„é‚£ä¸ªæ—¶é—´ç‚¹æ‰§è¡Œï¼Œååºéå†ä»£ç åœ¨ç¦»å¼€æŸä¸ªèŠ‚ç‚¹ä¹‹åçš„é‚£ä¸ªæ—¶é—´ç‚¹æ‰§è¡Œã€‚
```
æ ¸å¿ƒå°±æ˜¯ for å¾ªç¯é‡Œé¢çš„é€’å½’ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹å‰ã€Œåšé€‰æ‹©ã€ï¼Œåœ¨é€’å½’è°ƒç”¨ä¹‹åã€Œæ’¤é”€é€‰æ‹©ã€ï¼Œç‰¹åˆ«ç®€å•ã€‚

å›æº¯ç®—æ³•å°±æ˜¯çº¯æš´åŠ›ç©·ä¸¾ï¼Œå¤æ‚åº¦ä¸€èˆ¬éƒ½å¾ˆé«˜

å›æº¯ç®—æ³•å°±æ˜¯ä¸ªå¤šå‰æ ‘çš„éå†é—®é¢˜ï¼Œå…³é”®å°±æ˜¯åœ¨å‰åºéå†å’Œååºéå†çš„ä½ç½®åšä¸€äº›æ“ä½œ



## å›æº¯ç®—æ³•ç§’æ€æ‰€æœ‰æ’åˆ—ç»„åˆ
https://labuladong.online/algo/di-san-zha-24031/bao-li-sou-96f79/hui-su-sua-56e11/

æ— è®ºæ˜¯æ’åˆ—ã€ç»„åˆè¿˜æ˜¯å­é›†é—®é¢˜ï¼Œç®€å•è¯´æ— éå°±æ˜¯è®©ä½ ä»åºåˆ— nums ä¸­ä»¥ç»™å®šè§„åˆ™å–è‹¥å¹²å…ƒç´ ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å˜ä½“ï¼š

- å½¢å¼ä¸€ã€å…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼Œå³ nums ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿™ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„å½¢å¼ã€‚
ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ nums = [2,3,6,7]ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥åªæœ‰ [7]ã€‚

- å½¢å¼äºŒã€å…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼Œå³ nums ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ã€‚
ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ nums = [2,5,2,1,2]ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§ [2,2,2,1] å’Œ [5,2]ã€‚

- å½¢å¼ä¸‰ã€å…ƒç´ æ— é‡å¯å¤é€‰ï¼Œå³ nums ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡ã€‚
ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥ nums = [2,3,6,7]ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§ [2,2,3] å’Œ [7]ã€‚

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¯´æœ‰ç¬¬å››ç§å½¢å¼ï¼Œå³å…ƒç´ å¯é‡å¯å¤é€‰ã€‚ä½†æ—¢ç„¶å…ƒç´ å¯å¤é€‰ï¼Œé‚£åˆä½•å¿…å­˜åœ¨é‡å¤å…ƒç´ å‘¢ï¼Ÿå…ƒç´ å»é‡ä¹‹åå°±ç­‰åŒäºå½¢å¼ä¸‰ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸ç”¨è€ƒè™‘ã€‚

## å­é›†ï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰
### åŠ›æ‰£ç¬¬ 78 é¢˜ - å­é›† - https://leetcode.cn/problems/subsets/description/

![Alt text](image-1.png)
```js
ä¸ºä»€ä¹ˆé›†åˆ [2] åªéœ€è¦æ·»åŠ  3ï¼Œè€Œä¸æ·»åŠ å‰é¢çš„ 1 å‘¢ï¼Ÿ

å› ä¸ºé›†åˆä¸­çš„å…ƒç´ ä¸ç”¨è€ƒè™‘é¡ºåºï¼Œ[1,2,3] ä¸­ 2 åé¢åªæœ‰ 3ï¼Œå¦‚æœä½ æ·»åŠ äº†å‰é¢çš„ 1ï¼Œé‚£ä¹ˆ [2,1] ä¼šå’Œä¹‹å‰å·²ç»ç”Ÿæˆçš„å­é›† [1,2] é‡å¤ã€‚

æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬é€šè¿‡ä¿è¯å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºä¸å˜æ¥é˜²æ­¢å‡ºç°é‡å¤çš„å­é›†ã€‚

```
## ç»„åˆï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰
### åŠ›æ‰£ç¬¬ 77 é¢˜ã€Œç»„åˆã€- https://leetcode.cn/problems/combinations/description/

å¯¹ä¸Šä¸€é¢˜åšç¨å¾®çš„è°ƒæ•´å³å¯ï¼›

ç°åœ¨ä½ åªéœ€è¦æŠŠç¬¬ 2 å±‚ï¼ˆæ ¹èŠ‚ç‚¹è§†ä¸ºç¬¬ 0 å±‚ï¼‰çš„èŠ‚ç‚¹æ”¶é›†èµ·æ¥ï¼Œå°±æ˜¯å¤§å°ä¸º 2 çš„æ‰€æœ‰ç»„åˆï¼š
![Alt text](image-2.png)

```js
//  å¾—åˆ°[1, 2, 3, .... n]æ•°ç»„
const nums = Array.from({length: n}, (_, i) => i+1) 

//  å¢åŠ å›æº¯å‡½æ•°çš„ç»ˆæ­¢æ¡ä»¶
if (track.length === k) {
  res.push([...track])
  return
}
```
## æ’åˆ—ï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰
### åŠ›æ‰£ç¬¬ 46 é¢˜ã€Œå…¨æ’åˆ—ã€å°±æ˜¯æ ‡å‡†çš„æ’åˆ—é—®é¢˜ï¼š
[ã€Œå…¨æ’åˆ—ã€](./ç™¾åº¦+leetcode46-å…¨æ’åˆ—é—®é¢˜.md)

åˆšæ‰è®²çš„ç»„åˆ/å­é›†é—®é¢˜ä½¿ç”¨ start å˜é‡ä¿è¯å…ƒç´  nums[start] ä¹‹ååªä¼šå‡ºç° nums[start+1..] ä¸­çš„å…ƒç´ ï¼Œé€šè¿‡å›ºå®šå…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¿è¯ä¸å‡ºç°é‡å¤çš„å­é›†ã€‚

ä½†æ’åˆ—é—®é¢˜æœ¬èº«å°±æ˜¯è®©ä½ ç©·ä¸¾å…ƒç´ çš„ä½ç½®ï¼Œnums[i] ä¹‹åä¹Ÿå¯ä»¥å‡ºç° nums[i] å·¦è¾¹çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¹‹å‰çš„é‚£ä¸€å¥—ç©ä¸è½¬äº†ï¼Œéœ€è¦é¢å¤–ä½¿ç”¨ used æ•°ç»„æ¥æ ‡è®°å“ªäº›å…ƒç´ è¿˜å¯ä»¥è¢«é€‰æ‹©ã€‚

```js
//  åŸºäºä»¥ä¸Šç»“è®ºè¿›è¡Œæ”¹è‰¯
function permute(nums) {
  const res = []
  const track = []
  const used = [] // äº‹å®ä¸Š, used éƒ½å¯ä»¥ä¸ç”¨ï¼Œç›´æ¥ç”¨track å°±è¡Œ 

  const backtrack = () => {
    if (track.length === nums.length) {
      res.push([...track])
      return
    }

    for(let i=0; i<nums.length; i++) {
      if (used.includes(nums[i])) {
        continue
      }
      used.push(nums[i])
      track.push(nums[i])
      backtrack(i+1)
      track.pop()
      used.pop()

    }
  }
  
  backtrack()
  return res
}
```

ä½†å¦‚æœé¢˜ç›®ä¸è®©ä½ ç®—å…¨æ’åˆ—ï¼Œè€Œæ˜¯è®©ä½ ç®—å…ƒç´ ä¸ªæ•°ä¸º k çš„æ’åˆ—ï¼Œæ€ä¹ˆç®—ï¼Ÿ

```js
function permute(nums, k) {
  const res = []
  const track = []
  const used = []  

  const backtrack = () => {
    //  ä¿®æ”¹æ­¤å¤„çš„æ¡ä»¶å³å¯!!!!!!!!!!
    if (track.length === k) {
      res.push([...track])
      return
    }

    for(let i=0; i<nums.length; i++) {
      if (used.includes(nums[i])) {
        continue
      }
      used.push(nums[i])
      track.push(nums[i])
      backtrack(i+1)
      track.pop()
      used.pop()

    }
  }
  
  backtrack()
  return res
}
```

## å­é›†/ç»„åˆï¼ˆå…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼‰
åŠ›æ‰£ç¬¬ 90 é¢˜ã€Œå­é›† IIã€
https://leetcode.cn/problems/subsets-ii/

éœ€è¦å…ˆè¿›è¡Œæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·ï¼Œå¦‚æœå‘ç° nums[i] == nums[i-1]ï¼Œåˆ™è·³è¿‡ï¼š

```js
var subsetsWithDup = function(nums) {
  const res = []
  const track = []
  // æ’åºï¼Œä»¥ä¾¿äºå‰ªæç®—æ³•çš„å®ç°
  nums.sort((a, b) => a - b)

  const backtrack = (start) => {
    res.push([...track])
    //  æŒ‰ç…§æ•°ç»„çš„é¡ºåº é˜²æ­¢å‡ºç°é‡å¤å­é›†
    for (let i=start; i<nums.length; i++) {
      // å‰ªæé€»è¾‘ï¼Œå€¼ç›¸åŒçš„ç›¸é‚»æ ‘æï¼Œåªéå†ç¬¬ä¸€æ¡
      if (i>start && nums[i] === nums[i-1]) {
        continue
      }
      track.push(nums[i])

      backtrack(i+1)

      track.pop()
    }
  }

  backtrack(0)

  return res
};
```

æˆ‘ä»¬è¯´äº†ç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜æ˜¯ç­‰ä»·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥çœ‹ä¸€é“ç»„åˆçš„é¢˜ç›®å§ï¼Œè¿™æ˜¯åŠ›æ‰£ç¬¬ 40 é¢˜ã€Œç»„åˆæ€»å’Œ IIã€
https://leetcode.cn/problems/combination-sum-ii/description/

```js
var combinationSum2 = function(candidates, target) {
  const res = []
  const track = []
  let trackSum = 0

  candidates.sort((a, b) => a - b)

  const backtrack = (start) => {
    // è¾¾åˆ°ç›®æ ‡å’Œï¼Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼Œè®°å½•ç»“æœ
    if (trackSum === target) {
      res.push([...track])
      return
    }
    // å…ˆå‰ªæï¼Œè¶…è¿‡ç›®æ ‡å’Œï¼Œç›´æ¥ç»“æŸ ï¼ï¼ï¼ï¼ï¼ï¼ï¼
    if (trackSum > target) return

    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for(let i=start; i<candidates.length; i++) {
      // å‰ªæé€»è¾‘ï¼Œå€¼ç›¸åŒçš„æ ‘æï¼Œåªéå†ç¬¬ä¸€æ¡
      if (i>start && candidates[i] === candidates[i-1]) {
        continue
      }
      //  é€‰æ‹©
      track.push(candidates[i])
      trackSum += candidates[i]
      backtrack(i+1)
      //  æ’¤é”€é€‰æ‹©
      track.pop()
      trackSum -= candidates[i]
    }
  }

  backtrack(0)

  return res
};
```

## æ’åˆ—ï¼ˆå…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼‰
åŠ›æ‰£ç¬¬ 47 é¢˜ã€Œå…¨æ’åˆ— IIã€ï¼š
[ã€Œå…¨æ’åˆ—ã€](./ç™¾åº¦+leetcode46-å…¨æ’åˆ—é—®é¢˜.md)
```js
function permuteUnique(nums) {
  const result = []
  const visited = []
  nums.sort((a, b) => a-b)

  const backtrack = (track) => {
    if (track.length === nums.length) {
      result.push([...track])
      return 
    }

    for(let i=0; i<nums.length; i++) {
      //  æ¯”å¦‚è¾“å…¥ nums = [1,2,2',2'']ï¼Œ2' åªæœ‰åœ¨ 2 å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼ŒåŒç†ï¼Œ2'' åªæœ‰åœ¨ 2' å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼Œè¿™å°±ä¿è¯äº†ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿è¯å›ºå®šã€‚
      if (visited[i] || (i>0 && nums[i] === nums[i-1] && !visited[i-1])) {
        continue
      }
      visited[i] = true
      track.push(nums[i])
      backtrack(track)
      track.pop()
      visited[i] = false
    }

  }

  backtrack([])
  return result

}
```

## å­é›†/ç»„åˆï¼ˆå…ƒç´ æ— é‡å¯å¤é€‰ï¼‰
ç»ˆäºåˆ°äº†æœ€åä¸€ç§ç±»å‹äº†ï¼šè¾“å…¥æ•°ç»„æ— é‡å¤å…ƒç´ ï¼Œä½†æ¯ä¸ªå…ƒç´ å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ã€‚

ç›´æ¥çœ‹åŠ›æ‰£ç¬¬ 39 é¢˜ã€Œç»„åˆæ€»å’Œã€ï¼š
https://leetcode.cn/problems/combination-sum/

æ ‡å‡†çš„å­é›†/ç»„åˆé—®é¢˜æ˜¯å¦‚ä½•ä¿è¯ä¸é‡å¤ä½¿ç”¨å…ƒç´ çš„ï¼Ÿ

ç­”æ¡ˆåœ¨äº backtrack é€’å½’æ—¶è¾“å…¥çš„å‚æ•° startï¼š
```js
// æ³¨æ„ï¼šjavascript ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç ä¸ä¿è¯æ­£ç¡®æ€§ï¼Œä»…ä¾›å‚è€ƒã€‚å¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

var backtrack = function(nums, start) {
    for (var i = start; i < nums.length; i++) {
        // ...
        // é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
        backtrack(nums, i + 1);
        // ...
    }
};

è¿™ä¸ª i ä» start å¼€å§‹ï¼Œé‚£ä¹ˆä¸‹ä¸€å±‚å›æº¯æ ‘å°±æ˜¯ä» start + 1 å¼€å§‹ï¼Œä»è€Œä¿è¯ nums[start] è¿™ä¸ªå…ƒç´ ä¸ä¼šè¢«é‡å¤ä½¿ç”¨ï¼š

é‚£ä¹ˆåè¿‡æ¥ï¼Œå¦‚æœæˆ‘æƒ³è®©æ¯ä¸ªå…ƒç´ è¢«é‡å¤ä½¿ç”¨ï¼Œæˆ‘åªè¦æŠŠ i + 1 æ”¹æˆ i å³å¯ï¼š


```

```js
var combinationSum = function(candidates, target) {
  const res = []
  let trackSum = 0

  const backtrack = (track, start) => {
    if (trackSum === target) {
      res.push([...track])
      return;
    };

    if (trackSum > target) return
    
    for(let i=start; i<candidates.length; i++) {
      let tmp =candidates[i]
      trackSum += tmp;
      track.push(tmp)

      backtrack(track, i)

      track.pop()
      trackSum -= tmp
    }
  }

  backtrack([], 0)

  return res
};
```


## æ’åˆ—ï¼ˆå…ƒç´ æ— é‡å¯å¤é€‰ï¼‰
åŠ›æ‰£ä¸Šæ²¡æœ‰ç±»ä¼¼çš„é¢˜ç›®ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæƒ³ä¸€ä¸‹ï¼Œnums æ•°ç»„ä¸­çš„å…ƒç´ æ— é‡å¤ä¸”å¯å¤é€‰çš„æƒ…å†µä¸‹ï¼Œä¼šæœ‰å“ªäº›æ’åˆ—ï¼Ÿ

æ¯”å¦‚è¾“å…¥ nums = [1,2,3]ï¼Œé‚£ä¹ˆè¿™ç§æ¡ä»¶ä¸‹çš„å…¨æ’åˆ—å…±æœ‰ 3^3 = 27 ç§

```js
æ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•åˆ©ç”¨ used æ•°ç»„è¿›è¡Œå‰ªæï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœå…è®¸é‡å¤ä½¿ç”¨å…ƒç´ çš„è¯ï¼Œç›´æ¥æ”¾é£è‡ªæˆ‘ï¼Œå»é™¤æ‰€æœ‰ used æ•°ç»„çš„å‰ªæé€»è¾‘å°±è¡Œäº†ã€‚

/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var permuteRepeat = function(nums) {

    // åˆ›å»ºç»“æœé›†å’Œå›æº¯è·¯å¾„
    let res = [];
    let track = [];

    // å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°
    const backtrack = function(nums) {
        // base caseï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹
        if (track.length === nums.length) {
            // æ”¶é›†å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼
            res.push([...track]);
            return;
        }

        // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
        for (let i = 0; i < nums.length; i++) {
            // åšé€‰æ‹©
            track.push(nums[i]);
            // è¿›å…¥ä¸‹ä¸€å±‚å›æº¯æ ‘
            backtrack(nums);
            // å–æ¶ˆé€‰æ‹©
            track.pop();
        }
    }

    // ä»ç¬¬ä¸€å±‚å¼€å§‹å›æº¯
    backtrack(nums);

    return res;
};

```

## æ€»ç»“

### å½¢å¼ä¸€ã€å…ƒç´ æ— é‡ä¸å¯å¤é€‰
å³ nums ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œbacktrack æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```js

// ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
var backtrack = function(nums, start) {
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (var i = start; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.addLast(nums[i]);
        // æ³¨æ„å‚æ•°
        backtrack(nums, i + 1);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
    }
}

// æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
var backtrack = function(nums) {
    for (var i = 0; i < nums.length; i++) {
        // å‰ªæé€»è¾‘
        if (used[i]) {
            continue;
        }
        // åšé€‰æ‹©
        used[i] = true;
        track.addLast(nums[i]);

        backtrack(nums);
        // æ’¤é”€é€‰æ‹©
        track.removeLast();
        used[i] = false;
    }
}

```

### å½¢å¼äºŒã€å…ƒç´ å¯é‡ä¸å¯å¤é€‰
å³ nums ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œå…¶å…³é”®åœ¨äºæ’åºå’Œå‰ªæï¼Œbacktrack æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š

```js

var backtrack = (nums, start, track, used) => {
    nums = nums.sort();
    if (!used) {
        used = Array(nums.length).fill(false);
    }
    if (!track) {
        track = [];
    }
    if (track.length === nums.length) {
        // ç»“æœå¤„ç†
        return;
    }
    for (let i = start; i < nums.length; i++) {
        // å‰ªæé€»è¾‘ï¼Œè·³è¿‡å€¼ç›¸åŒçš„ç›¸é‚»æ ‘æ
        if (i > start && nums[i] === nums[i - 1]) {
            continue;
        }
        // åšé€‰æ‹©
        track.push(nums[i]);
        used[i] = true;
        // æ³¨æ„å‚æ•°
        backtrack(nums, i + 1, track, used);
        // æ’¤é”€é€‰æ‹©
        track.pop();
        used[i] = false;
    }
};

```


### å½¢å¼ä¸‰ã€å…ƒç´ æ— é‡å¯å¤é€‰
å³ nums ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡ï¼Œåªè¦åˆ æ‰å»é‡é€»è¾‘å³å¯ï¼Œbacktrack æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š


```js
//  å­é›†å’Œé›†åˆé—®é¢˜
var backtrack = function(nums, start) {
    // å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for (var i = start; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.add(nums[i]);
        // æ³¨æ„å‚æ•°, ä¸æ˜¯ i+1 
        backtrack(nums, i);
        // æ’¤é”€é€‰æ‹©
        track.pop();
    }
};

// æ’åˆ—é—®é¢˜
var backtrack = function(nums) {
    // æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
    for (var i = 0; i < nums.length; i++) {
        // åšé€‰æ‹©
        track.add(nums[i]);
        backtrack(nums);
        // æ’¤é”€é€‰æ‹©
        track.pop();
    }
};

```